(function(c){c.fn.stupidsort=function(a){var b=c(this),g=0,f=c.fn.stupidtable.dir,e=b.closest("table"),k=b.data("sort")||null;if(null!==k){b.parents("tr").find("th").slice(0,c(this).index()).each(function(){var b=c(this).attr("colspan")||1;g+=parseInt(b,10)});var d;1==arguments.length?d=a:(d=a||b.data("sort-default")||f.ASC,b.data("sort-dir")&&(d=b.data("sort-dir")===f.ASC?f.DESC:f.ASC));e.trigger("beforetablesort",{column:g,direction:d});e.css("display");setTimeout(function(){var a=[],l=e.data("sortFns")[k],h=e.children("tbody").children("tr");h.each(function(b,e){var d=c(e).children().eq(g),f=d.data("sort-value"),d="undefined"!==typeof f?f:d.text();a.push([d,e])});a.sort(function(a,b){return l(a[0],b[0])});d!=f.ASC&&a.reverse();h=c.map(a,function(a){return a[1]});e.children("tbody").append(h);e.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");b.data("sort-dir",d).addClass("sorting-"+d);e.trigger("aftertablesort",{column:g,direction:d});e.css("display")},10)}};c.fn.stupidtable=function(a){return this.each(function(){var b=c(this);a=a||{};a=c.extend({},c.fn.stupidtable.default_sort_fns,a);b.data("sortFns",a);b.on("click.stupidtable","thead th",function(){c(this).stupidsort()})})};c.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};c.fn.stupidtable.default_sort_fns={"int":function(a,b){return parseInt(a,10)-parseInt(b,10)},"float":function(a,b){return parseFloat(a)-parseFloat(b)},string:function(a,b){return a.localeCompare(b)},"string-ins":function(a,b){a=a.toLocaleLowerCase();b=b.toLocaleLowerCase();return a.localeCompare(b)}}})(jQuery);